<tool id="vcfallelicprimitives" name="VcfAllelicPrimitives:" version="0.0.2">
    <description>Split alleleic primitives (gaps or mismatches) into multiple VCF lines</description>
    <requirements>
        <requirement type="package" version="586c5ae5d57a38dae6b32ea831fb1f7cfa14c9bd">vcflib</requirement>
    </requirements>
    <command>
        cat "${input}" | vcfallelicprimitives 
            ${m_option} 
            -t "${t_option}" 
            $keep_info 
            $keep_geno > "${out_file1}"
    </command>
    <inputs>
        <param format="vcf" name="input" type="data" label="Select VCF dataset"/>
        <param name="m_option" type="boolean" checked="true" truevalue="-m" falsevalue="" label="Retain MNPs as separate events" help="--use-mnps option"/>
        <param name="t_option" size="20" type="text" value="Split primitives" label="Mark records which are split with this tag" help="--tag-parsed option"/>

        <param name="keep_info" type="boolean" truevalue="--keep-info" falsevalue="" checked="False" 
            label="Maintain site and allele-level annotations when decomposing" 
            help="Note that in many cases, such as multisample VCFs, these won't be valid post-decomposition.  For biallelic loci in single-sample VCFs, they should be usable with caution. (--keep-info)"/>
        <param name="keep_geno" type="boolean" truevalue="--keep-geno" falsevalue="" checked="False" 
            label="Maintain genotype-level annotations when decomposing" 
            help="Similar caution should be used for this as for --keep-info. (--keep-geno)"/>
    </inputs>
    <outputs>
        <data format="vcf" name="out_file1" label="${tool.name} on ${on_string}" />
    </outputs>
    <tests>
        <test>
            <param name="m_option" value="true"/>
            <param name="t_option" value="Split primitives"/>
            <param name="input" value="vcflib.vcf"/>
            <output name="out_file1" file="vcfallelicprimitives-test1.vcf"/>
        </test>
    </tests>
    <help>

If multiple alleleic primitives (gaps or mismatches) are specified in a single VCF record, this tools splits the record into multiple lines, but drops all INFO fields.  
"Pure" MNPs are split into multiple SNPs unless the -m flag is provided. 
Genotypes are phased where complex alleles have been decomposed, provided genotypes in the input.

The options are::

    --use-mnps (-m)
    Retain MNPs as separate events

    --tag-parsed (-t) FLAG
    Tag records which are split apart of a complex allele
    with this flag

----

Vcfallelicprimitives is a part of VCFlib toolkit developed by Erik Garrison (https://github.com/ekg/vcflib).

    </help>
</tool>

